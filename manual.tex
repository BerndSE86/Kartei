\documentclass[a4paper]{article}
\usepackage[a4paper]{geometry}
\usepackage[utf8]{inputenc} %UTF8
\usepackage[OT1]{fontenc}
\usepackage[scaled]{helvet}
\usepackage[ngerman]{babel} % Neue Rechtschreibung
%Menge an Paketen die für vor allem mathematisches und informatisches gut brauchbar ist
\usepackage{graphicx,hyperref}
\usepackage{enumerate,subfigure,listings}
\usepackage{pdfpages}
\lstloadlanguages{TeX}
\lstset{language={},frame=none,numbers=left,basicstyle=\sffamily,breaklines=true,tabsize=3, showspaces=false, showtabs=false, columns=fixed}	
\setlength{\parindent}{0pt} 
\setlength{\parskip}{1em}	
\geometry{a4paper,tmargin=2.6cm, bmargin=3.3cm, lmargin=3cm, rmargin=3.5cm, headheight=1em, headsep=1em, footskip=1cm} 

\setlength{\marginparwidth}{3cm}
\begin{document}
\title{Karteikarten in \LaTeX\\{\normalsize Version 1.7}}
\author{Ronny Bergmann\\\texttt{mail@darkmoonwolf.de}}
\date{November 2008}
\maketitle
\section{Einleitung}
Karteikarten sind zum Lernen hilfreich, sei es in kleinem Format für etwa Vokabeln oder für umfangreichere Themen die man auf größeren Karteikarten stichpunktartig notiert. Zusätzlich zum Lernen am Computer, wo die Karteikarten in einem Dokument vorliegen sollten, möchte man Karteikarten wahrscheinlich auch drucken. Dazu werden mehrere Karteikarten auf eine Seite gesetzt, wobei die zweite Seite „trickreich umsortiert“ wird, damit im Duplex-Druck jeweils die passenden Vorder- und Rückseiten aneinander gedruckt werden. Beide Formate basieren auf dem gleiche Inhalt, so dass hier \LaTeX\ hilfreich sein kann, diese beiden Formate zu produzieren.

\section{Dokumentoptionen}
Für eine gesamte Kartei\marginpar{\textbackslash document-\\class\{kartei\}}, oder auch Ansammlung von Karteikarten lassen sich zunächst die normalen Optionen für einen Artikel selbst angeben, also etwa die Standardschriftgröße. Werden diese nicht angegeben, so wird die Schriftgröße etwa auf \lstinline!10pt! hesetzt. Karteikarten sind stets im Querformat gesetzt.
\subsection{Kartenformat}
Es gibt die folgenden Karteikartenformate
\begin{description}
	\marginpar{a6paper}
	\item[{\sffamily a6paper}] Im Din A6-Karteikarten-Format $(148$mm$\times 105$mm$)$ sind die Ränder ein wenig größer gewählt, als bei den anderen beiden Formaten. Dieses Format ist der Standard, wenn nichts angegeben wird für das Format.
	 \marginpar{a7paper} 
	\item[{\sffamily a7paper}] Din A7-Karteikarten $(105$mm$\times 74$mm$)$
	 \marginpar{a8paper}
	\item[{\sffamily a8paper}] Din A8-Karteikarten $(74$mm$\times 52$mm$)$, diese scheinen recht klein, hier wirkt die Standardschriftgröße fast etwas groß.
\end{description}
\subsection{Druck}\marginpar{print}
Durch Angabe der Dokumentoption \lstinline!print! werden die Karteikarten auf einem DinA4-Blatt angeordnet, um eine einfache Druckversion zu erzeugen. Diese ist randlos und auf einer ungeraden Seite werden Vorderseiten, auf der darauffolgenden geraden Seite die dazugehörigen Karteikartenrückseiten angeordnet. Auf der geraden Seite wird zusätzlich als Schnitthilfe eine Linie um jede Karte gesetzt.
Beim Druck sollte diese randlose Version so verkleinert werden, dass die Druckränder verbleiben. Dazu bieten die üblichen Druckdialoge die option „auf Seitengröße verkleinern“ an. Im Schnitt sollte der Druckrand ebenso entfernt werden, da die Karten sonst ungleichmäßig aussehen. Einzig auf randlosen Druckern erhält man also die spezifizierten Originalformate.

Die Anordnung bei Din A6 (4 Karteikarten pro Blatt) bzw. Din A8 (16 pro Blatt) werden die Karten im Querformat gesetzt. Somit wird der Duplex-Druck  \emph{über die kurze Seite geklappt}. Für Din A7 werden die Karteikarten im Hochformat gesetzt, dies ergibt im Duplex-Druck ainso eine Anordnung, bei der die Karten über die \emph{über die lange Seite geklappt}.

\subsection{Beispiele}
\begin{itemize}
	\item Zum Erstellen von A6-Karteikarten, normal gesetzt \lstinline!\documentclass[a6paper]{kartei}!
	\item Für A7-Karteikarten im Druckformat \lstinline!\documentclass[a7paper, print]{kartei}!
\end{itemize}
%
%
%
\section{Die Karten}

\subsection{Definition einer Karte}\marginpar{\textbackslash begin\{karte\}}

Innerhalb des Dokumentes lassen sich nun einzelne Karteikarten definieren. Dazu gibt es die Umgebung \lstinline!karte!. Karten werden automatisch durchnummeriert und es ist möglich, per \lstinline!\ref{}! auf Karten zu verweisen, die \lstinline!\label{}! enthalten.
Die Umgebung \lstinline!karte! benötigt 3 Parameter, von denen 2 optional sind. Die Parameter und ihre Reihenfolge sind:
\begin{enumerate}[1.]
	\item \textbf{Fach} [optional] Das Fach oder wesentliches Stichwort
	\item \textbf{Titel/Frage} [Pflicht] wesentliche Frage/Titel oder Vokabel der Karteikarte
	\item \textbf{Kommentar} [optional] Ein kurzes Kommentar oder Stichwort, das etwa die Wichtigkeit klassifiziert oder Unterbereiche eines Faches wiedergibt
\end{enumerate}
Innerhalb der Umgebung selbst wird dann die eigentliche Antwort angegeben. Diese wird auf die Rückseite der Karteikarte gesetzt.

\subsection{Layout}
Die Vorderseite enthält im Kopf links das Fach, mittig die Nummer der Karte, rechts den Kommentar. Zentral auf der Vorderseite wird die Frage gesetzt. Auf der Rückseite wird links die Kartennummer wiederholt, mittig der Term „Antwort“.

Die beiden optionalen Werte Fach und Kommentar lassen sich auch global angeben. Eine Angabe bei einer einzelnen Kartei überschreibt allerdings die globale Definition. Die Idee ist dabei, das Fach zu Beginn einmal zu setzen und somit nur bei Ausnahmen eine Einzelangabe bei einer Karte vorzunehmen. Außerdem läßt sich der Antwortterm global neu setzen. Details dazu finden sich im Abschnitt \ref{subsec:Struktur}. Zwei Beispiele für Karteikarten finde sich in den Abbildungen \ref{fig:example} und \ref{fig:completeexample}.
\begin{figure}
\subfigure[][Vorderseite]{\fbox{\includegraphics[width=.5\textwidth-2\fboxsep-2\fboxrule,page=1]{manualexample1.pdf}}}
	\quad	\subfigure[][Rpckseite]{\fbox{\includegraphics[width=.5\textwidth-2\fboxsep-2\fboxrule,page=2]{manualexample1.pdf}}}
	\caption{Vorder- und Rückseite der exemplarischen Karte in etwas kleiner als Din A7}\label{fig:example}
\end{figure}
\begin{figure}
\subfigure[][Vorderseite]{\fbox{\includegraphics[width=.5\textwidth-2\fboxsep-2\fboxrule,page=3]{manualexample1.pdf}}}
	\quad	\subfigure[][Rückseite]{\fbox{\includegraphics[width=.5\textwidth-2\fboxsep-2\fboxrule,page=4]{manualexample1.pdf}}}
	\caption{Vorder- und Rückseite der gefüllten wichtigen Karte, etwas kleiner als Din A7}\label{fig:completeexample}
\end{figure}

\subsection{Beispiele}
\paragraph{exemplarisch gefüllte Karteikarte}
Mit exemplarisch gefüllten Daten ergibt sich etwa der Code (vgl. Abb. \ref{fig:example})
	\begin{lstlisting}
\begin{karte}[Fach]{Frage oder Titel}[Kommentar]
	Antworttext
\end{karte}
	\end{lstlisting} 

\paragraph{Karteikarte mit einer wichtigen Frage}
	Ein wenig mehr gefüllt ist etwa das folgende Beispiel (vgl. Abb. \ref{fig:completeexample}).
	\begin{lstlisting}
\begin{karte}[Lebensphilosophie]
	{Wie lautet die Antwort auf die Frage nach dem Leben dem Universum und dem Ganzen Rest?}
	[wichtig!]
	42
\end{karte}		
	\end{lstlisting}	
%\fach{standardfach}
%\fach{} zum expliziten leeren
%\fachstil{ --stilangabe-- }
%\kommentar{standardfach}
%\kommentar{} zum expliziten leeren
%\kommentarstil{ --stilangabe-- }
%\antwort{Antwort}
%\antwortstil{ --stilangabe-- }

\subsection{Strukturierung}\label{subsec:Struktur}
\paragraph{Fächer \& Kommentare}
Neben der Möglichkeit bei einer Karte das Fach und den Kommentar explizit anzugeben lässt sich beides auch global setzen, so dass es bei den darauffolgenden Karten verwendet wird und nicht bei jeder Karte einzeln angegeben werden muss.

Mit \lstinline!\fach! (engl. \lstinline!\subject!\marginpar{\textbackslash fach\\\textbackslash subject}) gefolgt von einem Text in \lstinline!{geschweiften Klammern}! setzt man das Fach für die nachfolgenden Karten. Die Schriftformatierung kann über Neudefinition des Befehl \lstinline!\fachstil! (engl. \lstinline!\subjectstyle!\marginpar{\textbackslash fachstil\\\textbackslash subjectstyle}) vorgenommen werden. Standardmäßig ist der Stil auf \emph{kursiv} gesetzt. Um an einer Stelle den Momentanen Wert Auszugeben, gibt es den Befehl \lstinline!\dasfach{}! (engl. \lstinline!\thesubject!\marginpar{\textbackslash dasfach\\\textbackslash thesubject}). Wird bei einer Karte bei gesetztem Fach trotzdem ein Fach angegeben, so hat das Fach der Karte Vorrang, so kann in einem großen Block auch eine Ausnahmekarte erzeugt werden.

Analog lässt sich der Kommentar global setzen mit \lstinline!\kommentar{Kommentartext}! (engl. \lstinline!\comment!\marginpar{\textbackslash kommentar\\\textbackslash comment}), dessen Stil mit \lstinline!\kommentarstil! (engl. \lstinline!\commentstyle!\marginpar{\textbackslash kommentarstil\\\textbackslash commentstyle}), respektive die Ausgabe mit \lstinline!\derkommentar! (engl. \lstinline!\thecomment! \marginpar{\textbackslash derkommentar\\\textbackslash thecomment}). Auch dies wird von einem lokalen Wert, der bei einer Karte angegeben wird überschrieben, so dass in einem Block von Karten mit gleichem Kommentar auch eine einzelne Ausnahme angegeben werden kann

Um also für das Fach „Lebensphilosophie“ eine Reihe von Karten zu erstellen, wobei eben jenes Fach in \emph{kursiv} gesetzt sein soll, benötigt man also
\begin{lstlisting}
	\fach{Lebensphilosophie}
	\renewcommand{\fachstil}{\emph}
\end{lstlisting}
Direkt vor der ersten Karteikarte bei der dies wirksam sein soll. Alle darauf folgenden Karten ohne Angabe des optionalen Fach-Parameters werden mit dem Fach Lebensphilosophie ausgegeben.

\paragraph{Antworttext auf der Rückseite}\label{par:Antwort} Und wiederum nochmals Analog lässt sich der Antworttext setzen mittels \lstinline!\antwort! (engl. \lstinline!\answer! \marginpar{\textbackslash antwort\\\textbackslash answer}) bzw. dessen Stil über Neudefinition von \lstinline!\antwortstil! (engl. \lstinline!\answerstyle! \marginpar{\textbackslash antwortstil\\\textbackslash answerstyle}). Zusätzlich ist auch der Antworttext im Fließtext einer Kartei mittels \lstinline!\dieantwort! (engl. \lstinline!\theanswer! \marginpar{\textbackslash dieantwort\\\textbackslash theanswer}) ausgebbar (dieser Befehl gibt nicht ausschließlich „42“ aus).

Um also den Antworttext auf Esperanto anzugeben, also auf „respondo“ zusetzen, was gleichzeitig in \textsc{Kapitälchen} gesetzt werden soll, verwendet man die beiden Befehle
\begin{lstlisting}
	\antwort{respondo}
	\renewcommand{\antwortstil}{\textsc}
\end{lstlisting}

\paragraph{Section \& Subsection} Zusätzlich kann man eine automatische Nummerierung der Fächer vornehmen, indem man diese mittels \lstinline!\section! \marginpar{\textbackslash section\\\textbackslash section*\\\textbackslash subsection\\\textbackslash subsection*} diese Fächer setzt. Möchte man die Nummerierung für ein Fach zwischendrin aussetzen, so kann man \lstinline!\section*! verwenden.

Verwendet man also vor der ersten Karteikarte den Befehl \lstinline!\section{Philosopie}!, so werden alle Karten, beginnend ab der ersten, mit dem fach {\sffamily 1. Philosophie} gesetzt. Setzt man dies später zwischen zwei Karteien mittels \lstinline!\section*{Zahlenkunde}!, so erhalten alle Karten das Fach {\sffamily Zahlenkunde}. Die Zählung wird bei darauffolgenden \lstinline!\section!-Befehlen mit 2 fortgesetzt.

Analog läßt sich mit den Befehlen \lstinline!\subsection! bzw. \lstinline!\subsection*!. Ein Kommentar setzen. Im ersten Fall werden diese ebenso durchnummeriert, durch den Befehl mit \lstinline!*! wird die Zählung ausgesetzt.

\subsection{Kartennummerierung}
Die Nummerierung der Karten ist standardmäßig definiert mit \marginpar{\textbackslash theCardID}
\begin{lstlisting}
	\renewcommand{\theCardID}{\emph{\# \arabic{CardID}}}
\end{lstlisting}
Also einem führenden \# gefolgt von der Nummer der Karte. Diese Anzeige wird auf der Vorderseite mittig im Kopf gesetzt und auf der Rückseite im Kopf links wiedergegeben. Ebenso wird dieses Format bei Verweisen ausgegeben. Durch Neudefinition des Befehls läßt sich das Format eben dieses Kartenzählers verändern.
%
%
%
\section{technische Details}
\subsection{Benötigte Pakete}
Um dieses Kartenpaket zu verwenden muss man mindestens die Pakete \lstinline!fancyhdr!, \lstinline!vmargin!, \lstinline!xargs!, \lstinline!pgfpages! und \lstinline!tiks! installiert haben. Diese finden sich alle im CTAN.
\subsection{Die Kartenumgebung}
Die Kartenumgebung beruht auf der \lstinline!twoside!-Variante des \lstinline!article!, und setzt damit die oben beschriebenen Sachen im Kopf für jede Karteikarte. Der Zähler wird dabei inkrementiert. Die gesamte Kartenumgebung ist über zwei Seiten definiert und. Das Layout wird durch den nachfolgenden Code erzeugt.
\newpage
\begin{lstlisting}[title=Die Kartenumgebung]
\newenvironmentx{karte}[3][1=\card@fach,3=\card@kommentar]
{
	\pagestyle{fancy}
	{
		\fancyhead[LO]{\dasfach{#1}} %\emph{#1}}
		\fancyhead[RO]{\derkommentar{#3}}
	}
	\pagestyle{fancy}{% 
	}%
~\vfill{~\hfill \parbox[t]{.9\textwidth}{\centering \Large #2}\hfill~}\vfill~
\refstepcounter{CardID}
\newpage%
}
{
	\fancyhead[LO]{\emph{\textbf{Achtung:} Antwortseite der Karte ist zu voll}} %vorlaeufige Loesung
	\cleardoublepage
}
\end{lstlisting}
\subsection{Das Drucklayout}
Das Drucklayout ist eine Variation der durch \lstinline!pgfpages! aus dem Projekt \lstinline!pgf & tikz!\footnote{\url{http://sourceforge.net/projects/pgf/}} bereitgestellten Befehle zur Anordnung mehrerer Seiten / Präsentationsfolien auf einer einzigen Seite. Diese wurdn modifiziert, so dass alle geraden Seiten (Vorderseiten) auf der ersten und alle ungeraden Seiten (Rückseiten) auf der Rückseite angeordnet werden. Die Rückseite ist außerdem in der Reihenfolge so verändert, dass das Ergebnis Duplex-Druckbar ist. Die Ränder auf der Rückseite werden ebenso damit erzeugt. 
%
%
%
\section{bekannte Probleme \& weitere Ideen}
\paragraph{„Inhalt der Rückseite zu umfangreich“} % (fold)
Ist die Antwort zu lang oder zu umfangreich, so wird eine neue Seite begonnen, was die Aufteilung der Vorder- und Rückseiten im doppelseitigen Layout zerstört. Vorläufige Lösung ist ein Hinweis in der Kopfzeile der einen zu vollen Seite. Die darauffolgende Karteikarte beginnt wieder korrekt auf einer ungeraden Seite. ebenso ist die Nummerierung nicht betroffen. Gelöst wird dies vorherst durch ein \lstinline!~\cleardoublepage!, 
% _inhalt_der_rückseite_zu_groß_ (end)

\paragraph{Positionierung von Kartennumer, Fach \& Kommentar selbst individuell festlegen}
Eine Erweiterungsidee ist, dass man selbst die Positionierung der Elemente Fach, Kommentar und Zählerausgabe festlegen kann, etwa in die Fußzeile o.ä.

\paragraph{Rückseitenformat festlegen} 
Für die Rückseite könnte man noch ein Format festlegen, etwa zustzliche Felder für eine Bewertung/Lernkontrolle.

\paragraph{Liste der Karteikarten \textbackslash Lernkontrolltabelle} 
Im Druck-Modus könnte man mit einem Index der Karteikarten sowohl eine Themenübersicht als auch eine Lernkontrolle einbinden, auf der man seine Lernfortschirtte verzeichnen kann.
\newpage
\section{Lizenz}
\begin{lstlisting}[basicstyle=\footnotesize\sffamily, numbers=none]
*
* -----------------------------------------------------------------------------------
* "THE BEER-WARE LICENSE" (Revision 42/023):
* Ronny Bergmann <mail@darkmoonwolf.de> wrote this file. As long as you retain 
* this notice you can do whatever you want with this stuff. If we meet some day,
* and you think  this stuff is worth it, you can buy me a beer or a coffee in return. 
* -----------------------------------------------------------------------------------
*
\end{lstlisting}

\section{Changelog}
\begin{description}
	\item[1.7 - 26.11.2008] Fach \& Kommentartext sind jetzt global setzbar über \lstinline!\section! und \lstinline!\subsection! (und deren \lstinline!*!-Derivate), Druckoptionen verkürzt und Standards eingeführt, Antworttext und Zählerformat veränderbar
	\item[1.6 - 09.09.2008] A7, A8-Karteikarten und die Druckränder eingefügt. Erste Version mit diesem Manual
\end{description}
\end{document}
